<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">

		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

		<title>miro</title>
		<meta name="description" content="">
		<meta name="author" content="ele munjeli">

		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
		<script type="text/javascript" src="paper/dist/paper.js"></script>
		<!--script type="text/paperscript" src="paper/miro.js" canvas="miroBackground"></script-->

		<!-- Replace favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
		<link rel="shortcut icon" href="/favicon.ico"/>
		<link rel="apple-touch-icon" href="/apple-touch-icon.png"/>
		<link href="css/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css" />
		<link href='http://fonts.googleapis.com/css?family=Arvo|Glass+Antiqua' rel='stylesheet' type='text/css'>
		<script type="text/javascript">
		//paperjs as global install
		paper.install(window);
		
		//jQuery init for the page
		$(document).ready(function(){
			$(".howto").hide();
			
		//paperjs functions for the drawing tool	
		var canvas = document.getElementById("miroBackground");
		paper.setup(canvas);
		
		
		// first get the function from the keypress
		var toolChooser 		= new Tool();
		var beadTool 		= new Tool();
		var colorShapeTool 	= new Tool();
		var circleTool		= new Tool();
		
		toolChooser.onKeyDown = function (event){
			var toolChoose = event.key;
			toolSwitch(toolChoose);
		};
		
		function toolSwitch(toolChoose){	

			switch(toolChoose){
				case "s":
				randomStar();
				break;

				case "d":
				stringOfBeads();
				break;
				
				case "b":
				makeColorShape(toolChoose);
				break;
				
				case "w":
				makeColorShape(toolChoose);
				break;
				
				case "y":
				makeColorShape(toolChoose);
				break;
				
				case "r":
				redCircle();
				
				default:
				break;
			}
		};
		

		//place rasters randomly across the screen. 
		function randomStar(){
				/*scaling and rotating the raster*/
				x = Math.floor(Math.random() * window.innerWidth + 1);
				y = Math.floor(Math.random() * window.innerHeight +1); 
				starSize = (Math.floor(Math.random() * 10 + 3)) * 0.1;
				starSize = starSize.toFixed(1);
				starWhich = Math.round(Math.random() * 4 + 1);
				starRotation = Math.round(Math.random() * 360 + 1);
				star = new paper.Raster("http://localhost/src/paperplay/images/star-" + starWhich + ".png");
				star.scale(parseFloat(starSize));
				star.rotate(starRotation);
				star.position = new Point(x, y);
				$(".tooldiv").removeClass("active");
	
		}
		
		//drawing tool like a string of dark beads
		function stringOfBeads(){
			
				var beadString;
				var bead;
				beadTool.activate();
							
				beadTool.onMouseDown = function(event) {
					beadString = new Path();
					beadString.strokeColor = "#111";
					beadString.strokeWidth = "3";
				};
				
				beadTool.onMouseDrag = function(event) {				
						tool.minDistance = 40;
						beadString.add(event.point);
						bead = new Path.Circle({
							center: event.middlePoint,
							radius: event.delta.length/4
						});
							
						bead.fillColor = "#111";								
				};
				
				beadTool.onMouseUp = function(event){
					beadString.simplify();
					beadString.smooth();
					toolChooser.activate();
					$(".tooldiv").removeClass("active");
					
				};
				
			
			
		}
		
		//abstract shapes in several colors	
		function makeColorShape(colorChoice){	
			var theColor;
			
			if(colorChoice == "b"){
				theColor = "#151C6C";
			}
			else if(colorChoice == "w"){
				theColor = "#fefefe";
			}
			
			else {
				theColor ="#B88601";
			}
			
			colorShapeTool.activate();
			var colorShape;
			
					
					colorShapeTool.onMouseDown = function(event){
						colorShape = new Path;				
						colorShape.strokeColor = "#111";
						colorShape.strokeWidth = 3;					
					};
					
					colorShapeTool.onMouseDrag = function(event){						
							colorShape.add(event.point);
							colorShape.fillColor = theColor;													
					};
					
					colorShapeTool.onMouseUp = function(event){	
						colorShape.closed = true;
						colorShape.simplify();
						colorShape.smooth();	
						toolChooser.activate();
						$(".tooldiv").removeClass("active");
									
			   		};
			   					
		}
		
		//drag to draw red circles
		function redCircle(){
			circleTool.activate();
			var redCirc;	
						
			circleTool.onMouseUp = function(event){

				redCirc = new Path.Circle({
					center: event.middlePoint,
					radius: event.delta.length/2
				});	
				redCirc.strokeWidth = 3;
				redCirc.strokeColor = "#111";
				redCirc.fillColor = "#E22D24";
	
				toolChooser.activate();
				$(".tooldiv").removeClass("active");
			};
						
		}
		
		//jQuery functions to show and hide circular divs on the page
		var blogDiv = $(".blogDiv");
		
		blogDiv.mouseenter(function(){
			blogDiv.html("Read Me!");
		});
		
		blogDiv.mouseleave(function(){
			blogDiv.html("<h2>Blog</h2>");
		});
		
		var contactDiv = $(".contactDiv");
		
		contactDiv.mouseenter(function(){
			contactDiv.html("What do you think?");
		});
		
		contactDiv.mouseleave(function(){
			contactDiv.html("<h2>Contact</h2>");
		});
		
		var miroDiv = $(".miroDiv");
			
		miroDiv.mouseenter(function(){
			miroDiv.html("How to...");
		});
		
		miroDiv.mouseleave(function(){
			miroDiv.html("<h2>Mir&#243;</h2>");	
		});
		
		var storyCircle = $(".storyCircle");
		
		miroDiv.click(function(){
			storyCircle.html("This page is an</br>homage to the <a href='http://en.wikipedia.org/wiki/Constellations_(Mir%C3%B3)#Description' target='_blank'>Constellations </a>series by Joan Mir&#243;. Use the toolbar bottom left to create your own Constellation." +
			"<div id='circleHide'><a>Hide circles now.</a></div>");
		});
		
		//toolbar functionality for mobile devices
		$("div.tooldiv").click(function(){
			var theTool = $(this).html();			
			
			//show the instructions
			if(theTool == "?"){
				$("li.toolbar").css("float", "none");
				$(this).html("x");
				$(".howto").show();		
			}
			else if(theTool == "x"){
				$("li.toolbar").css("float", "left");
				$(this).html("?");
				$(".howto").hide();
			}
			else{
				$(this).addClass("active");
				toolSwitch(theTool);
			}
			
		});

});
			

</script>

	</head>

	<body>
		
			<div class="poetess">
				<img src="images/poetess.svg" alt="poetess"/>
			</div>
			<canvas id="miroBackground" resize></canvas>
			<div class="storyCircle">
				<p>My name is</p>
				<p class='fancyCap'>Ele Munjeli</p>
				<p>I&rsquo;m a Web Developer who builds creative interactive experiences for communication &amp; deliberation</p>							
			</div>
			<div class="blogDiv">
				<h2>Blog</h2>
			</div>
			<div class="contactDiv">
				<h2>Contact</h2>
			</div>
			<div class="miroDiv">
				<h2>Mir&#243;</h2> 
			</div>
			<div class="instructDiv">
				<ul>				
					<li class="toolbar"><div class="tooldiv">?</div><span class="howto"> = hide instructions</span></li>
					<li class="toolbar"><div class="tooldiv">s</div><span class="howto"> = random stars</span></li>
					<li class="toolbar"><div class="tooldiv">d</div><span class="howto"> = drag for dark beads</span></li>
					<li class="toolbar"><div class="tooldiv">r</div><span class="howto"> = drag for red circles</span></li>
					<li class="toolbar"><div class="tooldiv">b</div><span class="howto"> = drag for blue shape</span></li>
					<li class="toolbar"><div class="tooldiv">w</div><span class="howto"> = drag for white shape</span></li>
					<li class="toolbar"><div class="tooldiv">y</div><span class="howto"> = drag for yellow shape</span> </li>			
				</ul>
			</div>

	</body>
</html>
